---
# yaml-language-server: $schema=https://schema.blue-build.org/module-stage-list-v1.json
# Incus is a modern fork of LXD for container and VM management
modules:
  - type: dnf
    install:
      packages:
        - incus
        - incus-agent
        - lxc

  # Copy incus configuration files
  - type: files
    files:
      - source: dev/incus/
        destination: /

  # Enable incus group service
  - type: systemd
    system:
      enabled:
        - dx-incus-groups.service
        - incus-workaround.service
